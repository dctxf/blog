---
title: 基于Gitlab的团队协作
date: 2020-03-18 15:58:14
tags: [git, gitlab, 团队协作]
---

软件开发过程中，我们会碰到各种问题，包括沟通上，技术上等等。为了在很大程度上避免这些问题，提升团队和个人的工作效率，出现很多种工作方式。特别是最近疫情的原因，远程办公造成了很多的不便。那么为了解决这些问题，出现了很多的工作方式和协同工具。

结合公司目前的情况，我选择了 gitlab 的相关功能，来解决咱们在团队协作中遇到的问题

当然任何流程都会有他的不足之处，希望大家能共同努力，加以完善，但在没有更好的方式之前，请大家严格遵守，以便提升整个团队的工作效率。

<!-- more -->

## 说在前面

不管什么样的工作方式，都需要一定的前提条件，由于每个人的理解能力，个人技能等有所不同，所以一套规范化的标准是十分有必要的。

下面的内容需要大家共同的努力才能实现。先感谢大家的努力！

## 划重点（个人观点）

1. 清楚自己的责任范围，尽可能的提升自己专业领域内的能力
2. 准确的、细致的理解业务的实际需求
3. 熟悉具体的项目流程，并能够严格，准确的执行
4. 良好的编码习惯，包括统一的编码风格，自动化测试等

### 加分项

- 一台性能良好的电脑（这是咱们的武器，削笔刀是打不赢战争的）
- 一个良好的上网环境（最好有一把可登高望远的梯子）

## 工作优先级

- 高优先级（High）：对系统有重大影响，只有解决它之后，才能去完成其他任务。
- 普通优先级（Medium）：对系统的某个部分有影响，用户的一部分操作会达不到预期效果。
- 低优先级（Low）：对系统的某个部分有影响，用户几乎感知不到。
- 微不足道（Trivial）：对系统的功能没有影响，通常是视觉效果不理想，比如字体和颜色不满意。

请大家合理使用优先级，不要把所有事情都放到高优先级

## 工作流程

1. 项目立项
2. 需求分析
3. 产品设计、UI 设计
4. 项目开发
5. 代码测试
6. 代码合并
7. code review
8. 程序部署

### 项目立项，需求分析，产品设计、UI 设计

由于咱们使用的 gitlab，gitlab 本身是给程序开发使用的，管理项目确实有点不妥。而且一般情况下，一个产品可能是有 N 多个项目组成，此时，如果有新的需求或者新的 bug 要提的话，不知道提到哪里。

目前采用方式大家在一个大组里，几乎每个人都拥有所有权限。所以请大家谨慎使用。除开发人员外，其他人没有修改代码的权限

### 项目开发

#### 环境

| 环境    | 环境名称 | 数据库    | 域名      | 测试              |
| ------- | -------- | --------- | --------- | ----------------- |
| dev     | 开发环境 | 本地/测试 | 本地域名  | 自测              |
| test    | 测试环境 | 测试      | 测试域名  | 测试人员          |
| staging | 预演环境 | 正式      | host 域名 | 验收人员+测试人员 |
| prod    | 正式环境 | 正式      | 正式域名  | -                 |

#### 代码风格

为了保证代码质量和高效协作，请大家务必保证代码风格一致

- 前端使用`eslint`+`perttier`

### 代码测试

- 在提交代码前请先自测

### code review

由于咱们人员的限制，这点希望大家有这个意识，如果没有人帮你看代码，自己要进行优化，保证代码质量

### 程序部署（CI/CD）

- 前端代码以后会部署到 oss
- 后端代码部署到 docker 服务

#### CI：持续集成（CONTINUOUS INTEGRATION

> CI/CD 中的“CI”始终指持续集成，它属于开发人员的自动化流程。成功的 CI 意味着应用代码的新更改会定期构建、测试并合并到共享存储库中。该解决方案可以解决在一次开发中有太多应用分支，从而导致相互冲突的问题。

#### CD 持续交付（Continuous Delivery）

> 持续交付通常是指开发人员对应用的更改会自动进行错误测试并上传到存储库（如  GitHub  或容器注册表），然后由运维团队将其部署到实时生产环境中。这旨在解决开发和运维团队之间可见性及沟通较差的问题。因此，持续交付的目的就是确保尽可能减少部署新代码时所需的工作量。

##### CD 持续部署（Continuous Deployment）

> 持续部署（另一种“CD”）指的是自动将开发人员的更改从存储库发布到生产环境，以供客户使用。它主要为了解决因手动流程降低应用交付速度，从而使运维团队超负荷的问题。持续部署以持续交付的优势为根基，实现了管道后续阶段的自动化。

## 参考资料

- [基于 GitLab 的工作流程设计](https://zhuanlan.zhihu.com/p/38774185)
- [视频：套路拆解:大厂是如何保证代码质量的！](https://www.bilibili.com/video/av71285473)
- [如何使用 Issue 管理软件项目？](http://www.ruanyifeng.com/blog/2017/08/issue.html)
- [用 GitLab CI 进行持续集成](https://scarletsky.github.io/2016/07/29/use-gitlab-ci-for-continuous-integration/)
- [基于 Gitlab CI 搭建持续集成环境](https://www.jianshu.com/p/705428ca1410)
- [[教學] Gitlab-CI 入門實作  —  自動化部署篇（CI/CD 系列分享文）](https://medium.com/nick-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E5%AD%B8%E7%BF%92%E8%A8%98/%E6%95%99%E5%AD%B8-gitlab-ci-%E5%85%A5%E9%96%80%E5%AF%A6%E4%BD%9C-%E8%87%AA%E5%8B%95%E5%8C%96%E9%83%A8%E7%BD%B2%E7%AF%87-ci-cd-%E7%B3%BB%E5%88%97%E5%88%86%E4%BA%AB%E6%96%87-cbb5100a73d4)
- [Gitlab CI 与 Kubernetes 的结合](https://www.qikqiak.com/post/gitlab-ci-k8s-cluster-feature/)
- [基于 GitLab 的 Code Review 教程 - Ken 的杂谈](https://ken.io/note/gitlab-code-review-tutorial)
- [程序员如何培养好的测试习惯？](https://juejin.im/post/5e6d902fe51d4526d326d195)
- [一文帮你秒懂 CI, CD AND CD](https://zhuanlan.zhihu.com/p/31097868)
- [理解 RESTful 架构](https://www.ruanyifeng.com/blog/2011/09/restful.html)
